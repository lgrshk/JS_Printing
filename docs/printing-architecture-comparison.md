# Порівняння архітектур системи друку етикеток

## Вступ

Цей документ описує два підходи до організації друку етикеток з Oracle APEX додатків та порівнює їх переваги та недоліки. Документ написаний на користувацькому рівні без глибоких технічних деталей.

### Два підходи:

1. **JS_Printing** - використання локального прінт-сервера з JavaScript
2. **Oracle сервер** - використання Oracle сервера як проміжного сервера

---

## Архітектура JS_Printing

### Як це працює

**Крок 1: Формування етикетки в браузері**
- Користувач відкриває Oracle APEX додаток у браузері
- Система формує дані для етикетки (текст, штрих-код тощо)
- Дані перетворюються в ZPL команди (мова програмування принтерів)

**Крок 2: Відправка через JavaScript**
- JavaScript код у браузері відправляє дані на прінт-сервер
- З'єднання встановлюється через HTTPS (захищений протокол)
- Використовується стандартний порт 443 для захищеного з'єднання
- Дані шифруються автоматично браузером

**Крок 3: Обробка на прінт-сервері**
- Python прінт-сервер отримує зашифрований запит
- Сервер розшифровує дані (автоматично через SSL)
- Сервер перевіряє валідність запиту

**Крок 4: Відправка на принтер**
- Прінт-сервер відправляє ZPL команди на принтер
- З'єднання з принтером відбувається через локальну мережу (TCP/IP)
- Принтер друкує етикетку

### Особливості архітектури JS_Printing

✅ **Працює в локальній мережі**
- Прінт-сервер знаходиться в тій самій локальній мережі, що й принтер
- Не потребує виходу в інтернет для друку етикеток
- Швидке з'єднання між сервером та принтером

✅ **Безпечне з'єднання**
- Використовується SSL шифрування для з'єднання браузер-сервер
- Браузер автоматично перевіряє валідність сертифікату
- Дані захищені від перехоплення

✅ **Не потребує статичної IP-адреси**
- Може працювати з динамічною IP-адресою
- Використовує динамічний DNS (наприклад, DuckDNS) для доступу з інтернету
- Не потрібно додатково платити провайдеру за статичну IP

✅ **Не потребує port-forwarding**
- Не потрібно налаштовувати переадресацію портів на роутері
- Використовує стандартні порти HTTPS (443)
- Простіше налаштування та менше можливостей для помилок

✅ **Незалежність від інтернету**
- Для друку етикеток інтернет не потрібен
- Інтернет потрібен тільки для отримання SSL сертифікатів (раз на 3 місяці)
- Система працює навіть при відсутності інтернету

### Схема роботи

```
[Користувач в браузері]
        ↓
[Формування етикетки в Oracle APEX]
        ↓
[JavaScript відправляє через HTTPS (порт 443)]
        ↓ (зашифровано)
[Python прінт-сервер (локальна мережа)]
        ↓ (розшифровано)
[Відправка ZPL через TCP/IP]
        ↓
[Принтер друкує етикетку]
```

---

## Архітектура через Oracle сервер

### Як це працює

**Крок 1: Формування етикетки в браузері**
- Користувач відкриває Oracle APEX додаток у браузері
- Система формує дані для етикетки
- Дані перетворюються в ZPL команди

**Крок 2: Обробка на Oracle сервері**
- PL/SQL код на Oracle сервері отримує дані
- Сервер формує запит для відправки на принтер
- Запит відправляється з Oracle сервера

**Крок 3: Вимоги до мережевої інфраструктури**
- Oracle сервер повинен мати статичну білу IP-адресу від провайдера
- Статична IP дозволяє постійно знаходити сервер в інтернеті
- Потрібно додатково платити провайдеру за статичну IP-адресу

**Крок 4: Налаштування port-forwarding**
- На роутері налаштовується переадресація портів (port-forwarding)
- Вхідний трафік з інтернету перенаправляється на Oracle сервер
- Потрібно відкрити порт для TCP/IP з'єднання (зазвичай порт 9100)
- Це створює додаткову точку конфігурації, де можуть виникнути помилки

**Крок 5: Відправка на принтер**
- Трафік йде через інтернет від Oracle сервера до принтера
- З'єднання відбувається через незашифрований TCP/IP протокол
- Дані передаються відкритим текстом через інтернет
- Принтер отримує ZPL команди та друкує етикетку

### Особливості архітектури через Oracle сервер

⚠️ **Потребує статичної білої IP-адреси**
- Необхідно мати статичну IP-адресу від провайдера
- Динамічна IP-адреса не підходить, оскільки змінюється
- Додаткові витрати на статичну IP-адресу

⚠️ **Потребує налаштування port-forwarding**
- Необхідно налаштувати переадресацію портів на роутері
- Потрібно відкрити порт для TCP/IP з'єднання
- Складніше налаштування та більше можливостей для помилок
- При зміні роутера або мережевої конфігурації потрібно переналаштовувати

⚠️ **Трафік незашифрований**
- Дані передаються через інтернет відкритим текстом
- ZPL команди можуть бути перехоплені
- Немає захисту від несанкціонованого доступу

⚠️ **Працює через інтернет**
- Залежить від стабільності інтернет-з'єднання
- Затримки через інтернет можуть впливати на швидкість друку
- При відсутності інтернету система не працює

### Схема роботи

```
[Користувач в браузері]
        ↓
[Формування етикетки в Oracle APEX]
        ↓
[PL/SQL код на Oracle сервері]
        ↓
[Статична біла IP-адреса]
        ↓
[Port-forwarding на роутері]
        ↓ (незашифровано через інтернет)
[TCP/IP з'єднання (порт 9100)]
        ↓
[Принтер друкує етикетку]
```

---

## Порівняльна таблиця

| Критерій | JS_Printing | Oracle сервер |
|----------|-------------|---------------|
| **Статична IP-адреса** | ❌ Не потрібна | ✅ Обов'язкова |
| **Port-forwarding** | ❌ Не потрібен | ✅ Обов'язковий |
| **Шифрування трафіку** | ✅ Так (HTTPS/SSL) | ❌ Ні (відкритий TCP/IP) |
| **Залежність від інтернету** | ❌ Не залежить (для друку) | ✅ Залежить |
| **Складність налаштування** | ⭐⭐ Просте | ⭐⭐⭐⭐ Складне |
| **Безпека** | ✅ Висока (шифрування) | ⚠️ Низька (відкритий трафік) |
| **Швидкість друку** | ✅ Швидка (локальна мережа) | ⚠️ Залежить від інтернету |
| **Додаткові витрати** | ❌ Немає | ✅ Статична IP-адреса |
| **Надійність** | ✅ Висока | ⚠️ Залежить від інтернету |
| **Можливість перехоплення даних** | ❌ Неможливо (шифрування) | ✅ Можливо (відкритий трафік) |

### Пояснення критеріїв

**Статична IP-адреса**
- JS_Printing: Може працювати з динамічною IP, використовує динамічний DNS
- Oracle сервер: Потребує статичної IP для постійного доступу з інтернету

**Port-forwarding**
- JS_Printing: Використовує стандартні HTTPS порти, не потребує налаштування
- Oracle сервер: Потребує налаштування переадресації портів на роутері

**Шифрування трафіку**
- JS_Printing: Використовує SSL/TLS шифрування для захисту даних
- Oracle сервер: Трафік йде відкритим текстом через інтернет

**Залежність від інтернету**
- JS_Printing: Працює в локальній мережі, інтернет потрібен тільки для SSL сертифікатів
- Oracle сервер: Повністю залежить від інтернет-з'єднання

**Складність налаштування**
- JS_Printing: Простіше налаштування, менше конфігураційних точок
- Oracle сервер: Складніше налаштування через необхідність статичної IP та port-forwarding

**Безпека**
- JS_Printing: Висока безпека завдяки шифруванню та локальній мережі
- Oracle сервер: Низька безпека через відкритий трафік в інтернеті

---

## Висновки та рекомендації

### Переваги JS_Printing

1. **Простота налаштування**
   - Не потрібна статична IP-адреса
   - Не потрібен port-forwarding
   - Менше конфігураційних точок означає менше можливостей для помилок

2. **Безпека**
   - Шифрування даних через HTTPS
   - Локальна мережа забезпечує додатковий захист
   - Неможливість перехоплення даних

3. **Надійність**
   - Працює незалежно від інтернету
   - Швидке з'єднання в локальній мережі
   - Менше точок відмови

4. **Економія**
   - Не потрібно платити за статичну IP-адресу
   - Менше витрат на інфраструктуру

### Недоліки архітектури через Oracle сервер

1. **Складність налаштування**
   - Потребує статичної IP-адреси
   - Потребує налаштування port-forwarding
   - Більше конфігураційних точок

2. **Безпека**
   - Відкритий трафік через інтернет
   - Можливість перехоплення даних
   - Немає шифрування

3. **Залежність**
   - Повна залежність від інтернет-з'єднання
   - Затримки через інтернет
   - Система не працює без інтернету

4. **Додаткові витрати**
   - Потрібна статична IP-адреса (додаткові витрати)
   - Більше витрат на інфраструктуру

### Рекомендації

**Рекомендується використовувати JS_Printing архітектуру, якщо:**

- ✅ Потрібна простота налаштування
- ✅ Важлива безпека даних
- ✅ Потрібна незалежність від інтернету
- ✅ Хочете уникнути додаткових витрат на статичну IP
- ✅ Принтер знаходиться в локальній мережі

**Архітектура через Oracle сервер може бути доречною, якщо:**

- ⚠️ Вже є налаштована статична IP-адреса
- ⚠️ Принтер знаходиться в іншій мережі (не локальній)
- ⚠️ Немає можливості встановити локальний прінт-сервер

### Загальний висновок

JS_Printing архітектура пропонує більш сучасний, безпечний та простий у налаштуванні підхід до друку етикеток. Вона усуває необхідність у статичній IP-адресі та port-forwarding, забезпечує шифрування даних та працює незалежно від інтернету. Це робить її ідеальним вибором для більшості випадків використання, особливо коли принтер знаходиться в локальній мережі.

Архітектура через Oracle сервер, хоча й може працювати, має значні недоліки з точки зору безпеки, складності налаштування та залежності від інтернету. Вона може бути доречною тільки в специфічних випадках, коли вже є налаштована інфраструктура зі статичною IP-адресою.

---

## Додаткова інформація

Для детальної інформації про налаштування та використання JS_Printing системи дивіться:
- [README.md](../README.md) - загальна інформація про систему
- [docker-print-server/README.md](../docker-print-server/README.md) - інструкції з розгортання прінт-сервера
- [examples/apex-usage-example.md](../examples/apex-usage-example.md) - приклади використання в Oracle APEX

